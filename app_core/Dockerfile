From python:3.7.5-slim
RUN pip install django==2.2.6 whitenoise whitenoise==4.1.4
ADD ./src /src
WORKDIR /src

ENV PORT=80
ENV MICRO_USER=user
ENV MICRO_PASSWORD=password
ENV NTNX_FVM_HOST=127.0.0.1
ENV NTNX_FVM_PORT=8081
ENV NTNX_EULA_HOST=127.0.0.1
ENV NTNX_EULA_PORT=8082
ENV NTNX_SETUP_HOST=127.0.0.1
ENV NTNX_SETUP_PORT=8083
ENV NTNX_POWER_HOST=127.0.0.1
ENV NTNX_POWER_PORT=8084

ENTRYPOINT ["python", "-u", "server_fvm.py"]